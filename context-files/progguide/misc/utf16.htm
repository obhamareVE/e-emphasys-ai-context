<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
      <title>UTF-16 Encoding</title>
      <link rel="stylesheet" type="text/css" href="../../skin/General.css">
      <link rel="stylesheet" type="text/css" href="../../skin/MSHtmlHelp.css">
      <meta name="keywords" content="Unicode UTF-16 ">
      <meta name="author" content="Infor">
      <meta name="ROBOTS" content="ALL">
   </head>
   <body id="body">
      <div class="TopicTitle">UTF-16 Encoding</div>
      <div class="body">
         <div class="GeneralSection">
            <p class="Paragraph">UTF-16 is a standard way to encode <a href="../../progguide/misc/unicode.htm" class="manualLink">Unicode</a> characters by means
               	  of a stream of 16-bit words. First the 'normal' UTF-16 standard is explained,
               	  then 'byte-serialized UTF-16' is explained.
            </p>
            <p class="Paragraph">In early versions of the Unicode standard, there was a
               	  one-to-one correspondence between Unicode characters and 16-bit words.
               	  Consequently, in older parts of this Programmers Guide, the term 'Unicode' is
               	  often used more or less as a synonym for single-word UTF-16.
            </p>
            <p class="Paragraph">Later on, when the need for more than 2^16 Unicode characters
               	  arose, the surrogate characters were introduced. At one side they were normal
               	  16-bit Unicode characters, at the other side correct pairs of surrogate
               	  characters might be interpreted as new 'supplementary' characters.
            </p>
            <p class="Paragraph">Nowadays, the Unicode character model has changed such that
               	  certain 16-bit words do not at all represent any Unicode character. A correct
               	  pair of such 16-bit words does represent a single (supplementary) Unicode
               	  character.
            </p>
            <p class="Paragraph">Each Unicode character is encoded by a sequence of one to two
	  16-bit words. The Unicode standard defines 2^16 + 2^20 code points, numbered
	  U+0000 … U+10FFFF. With a straightforward binary numbering of the complete
	  Unicode range, 21 bits are needed. Name the 21 bits as follows:</p>
            <p class="Paragraph"><code class="Code">b_20   b_19 b_18 b_17 b_16   b_15 b_14 b_13 b_12   b_11 b_10 b_9 b_8   b_7 b_6 b_5 b_4   b_3 b_2 b_1 b_0</code></p>
            <p class="Paragraph">For a slightly different numbering, first add an amount of
               	  0x0F0000 (binary 0 1111 0000 0000 0000 0000) to the code point value. Name the
               	  resulting 21 bits as follows:
            </p>
            <p class="Paragraph"><code class="Code">c_20   c_19 c_18 c_17 c_16   c_15 c_14 c_13 c_12   c_11 c_10 c_9 c_8   c_7 c_6 c_5 c_4   c_3 c_2 c_1 c_0</code></p>
            <p class="Paragraph">Notice the following properties of the two groups of
               	  bits:
            </p>
            <ul class="List">
               <li class="ListItem"><code class="Code">b_</code> <i class="Emphasis">i</i> = <code class="Code">c_</code> <i class="Emphasis">i</i> for each <i class="Emphasis">i</i> in the range 0 … 15.
               </li>
               <li class="ListItem">Bits <code class="Code">b_20   b_19 b_18 b_17 b_16</code> run through only the first 17 of the 32 combinations,
	     viz. 00000 … 10000.
               </li>
               <li class="ListItem">Bits <code class="Code">c_20   c_19 c_18 c_17 c_16</code> run through only the last 17 of the 32 combinations,
	     viz. 01111 … 11111.
               </li>
               <li class="ListItem">The single bit <code class="Code">c_20</code> is enough to distinguish between the Basic Multilingual Plane
		(Unicode range U+0000 … U+FFFF, <code class="Code">c_20</code> = 0)
		and the Supplementary Characters (Unicode range U+010000 … U+10FFFF, <code class="Code">c_20</code> = 1).
               </li>
            </ul>
            <p class="Paragraph">In the explanation below,</p>
            <ul class="List">
               <li class="ListItem">each small box represents a single bit;</li>
               <li class="ListItem">each group of four horizontally adjacent small boxes represents
                  		a hexadecimal digit;
               </li>
               <li class="ListItem">each row (containing four groups of four horizontally adjacent
                  		boxes) represents a 16-bit word.
               </li>
            </ul>
            <p class="Paragraph">After these preliminaries, the UTF-16 encoding is defined as
               	  follows.
            </p>
            <div class="subGeneralSection">
               <div class="subSectionTitle">Single-word UTF-16</div>
               <p class="Paragraph">Single-word UTF-16 is used for Unicode characters in the
		range U+0000 … U+FFFF.
		For a Unicode character in this range,
		bit <code class="Code">b_</code> <i class="Emphasis">i</i> is zero
                  		for each <i class="Emphasis">i</i> in the range 16 … 21,
		and the remaining 16 bits are
		represented in single-word UTF-16 as follows:
               </p>
               <table border="1" class="default">
                  <tbody noTR="1" class="default">
                     <tr no="1" isLast="true" class="default">
                        <td rowspan="1" colspan="1" class="default">b_15</td>
                        <td rowspan="1" colspan="1" class="default">b_14</td>
                        <td rowspan="1" colspan="1" class="default">b_13</td>
                        <td rowspan="1" colspan="1" class="default">b_12</td>
                        <td width="10" rowspan="1" colspan="1" class="default"></td>
                        <td rowspan="1" colspan="1" class="default">b_11</td>
                        <td rowspan="1" colspan="1" class="default">b_10</td>
                        <td rowspan="1" colspan="1" class="default">b_9</td>
                        <td rowspan="1" colspan="1" class="default">b_8</td>
                        <td width="10" rowspan="1" colspan="1" class="default"></td>
                        <td rowspan="1" colspan="1" class="default">b_7</td>
                        <td rowspan="1" colspan="1" class="default">b_6</td>
                        <td rowspan="1" colspan="1" class="default">b_5</td>
                        <td rowspan="1" colspan="1" class="default">b_4</td>
                        <td width="10" rowspan="1" colspan="1" class="default"></td>
                        <td rowspan="1" colspan="1" class="default">b_3</td>
                        <td rowspan="1" colspan="1" class="default">b_2</td>
                        <td rowspan="1" colspan="1" class="default">b_1</td>
                        <td rowspan="1" colspan="1" class="default">b_0</td>
                     </tr>
                  </tbody>
               </table>
               <p class="postspacer">&nbsp;</p>
               <p class="Paragraph">Notice that this Unicode range corresponds with the Basic
                  		Multilingual Plane (BMP) and that each character in this range is encoded by a
                  		16-bit word with the corresponding Unicode code point value.
               </p>
               <div class="subExampleSection">
                  <div class="subSectionTitle">Example</div>
                  <ul class="List">
                     <li class="ListItem">ASCII character 'A' (ASCII value 0x41)</li>
                     <li class="ListItem">is assigned to Unicode code point U+0041,</li>
                     <li class="ListItem">which corresponds to the 21-bit sequence 0 0000 0000 0000
                        			0100 0001,
                     </li>
                     <li class="ListItem">which is represented in single-word UTF-16 as 0000 0000
                        			0100 0001
                     </li>
                     <li class="ListItem">or in hexadecimal notation: 0041.</li>
                  </ul>
               </div>
               <div class="subExampleSection">
                  <div class="subSectionTitle">Example</div>
                  <ul class="List">
                     <li class="ListItem">the Latin Small Letter C With Cedilla ç</li>
                     <li class="ListItem">is assigned to Unicode code point U+00E7,</li>
                     <li class="ListItem">which corresponds to the 21-bit sequence 0 0000 0000 0000
                        			1110 0111,
                     </li>
                     <li class="ListItem">which is represented in single-word UTF-16 as 0000 0000
                        			1110 0111
                     </li>
                     <li class="ListItem">or in hexadecimal notation: 00E7.</li>
                  </ul>
               </div>
               <div class="subExampleSection">
                  <div class="subSectionTitle">Example</div>
                  <ul class="List">
                     <li class="ListItem">the Euro Sign &euro;</li>
                     <li class="ListItem">is assigned to Unicode code point U+20AC,</li>
                     <li class="ListItem">which corresponds to the 21-bit sequence 0 0000 0010 0000
                        			1010 1100,
                     </li>
                     <li class="ListItem">which is represented in single-word byte UTF-16 as 0010
                        			0000 1010 1100
                     </li>
                     <li class="ListItem">or in hexadecimal notation: 20AC.</li>
                  </ul>
                  <p class="Paragraph">The Unicode range U+D800 … U+DFFF is the so-called
		  Surrogates Area. No characters are assigned to code points in this range. This
		  means that the values 0xD800 … 0xDFFF will not occur in single-word UTF-16.
		  Instead, they are used for double-word UTF-16.</p>
               </div>
            </div>
            <div class="subGeneralSection">
               <div class="subSectionTitle">Double-word UTF-16</div>
               <p class="Paragraph">Double-word UTF-16 is used for Unicode characters in the range
		U+010000 … U+10FFFF.
		For a Unicode character in this range,
		bit <code class="Code">c_20</code> = 1 and the remaining 20 bits are represented in double-word UTF-16 as
                  		follows:
               </p>
               <table border="1" class="default">
                  <tbody noTR="3" class="default">
                     <tr no="1" isLast="false" class="default">
                        <td rowspan="1" colspan="1" class="default">1</td>
                        <td rowspan="1" colspan="1" class="default">1</td>
                        <td rowspan="1" colspan="1" class="default">0</td>
                        <td rowspan="1" colspan="1" class="default">1</td>
                        <td width="10" rowspan="1" colspan="1" class="default"></td>
                        <td rowspan="1" colspan="1" class="default">1</td>
                        <td rowspan="1" colspan="1" class="default">0</td>
                        <td rowspan="1" colspan="1" class="default">c_19</td>
                        <td rowspan="1" colspan="1" class="default">c_18</td>
                        <td width="10" rowspan="1" colspan="1" class="default"></td>
                        <td rowspan="1" colspan="1" class="default">c_17</td>
                        <td rowspan="1" colspan="1" class="default">c_16</td>
                        <td rowspan="1" colspan="1" class="default">c_15</td>
                        <td rowspan="1" colspan="1" class="default">c_14</td>
                        <td width="10" rowspan="1" colspan="1" class="default"></td>
                        <td rowspan="1" colspan="1" class="default">c_13</td>
                        <td rowspan="1" colspan="1" class="default">c_12</td>
                        <td rowspan="1" colspan="1" class="default">c_11</td>
                        <td rowspan="1" colspan="1" class="default">c_10</td>
                     </tr>
                     <tr no="2" isLast="false" class="default">
                        <td rowspan="1" colspan="1" class="default"></td>
                     </tr>
                     <tr no="3" isLast="true" class="default">
                        <td rowspan="1" colspan="1" class="default">1</td>
                        <td rowspan="1" colspan="1" class="default">1</td>
                        <td rowspan="1" colspan="1" class="default">0</td>
                        <td rowspan="1" colspan="1" class="default">1</td>
                        <td rowspan="1" colspan="1" class="default"></td>
                        <td rowspan="1" colspan="1" class="default">1</td>
                        <td rowspan="1" colspan="1" class="default">1</td>
                        <td rowspan="1" colspan="1" class="default">c_9</td>
                        <td rowspan="1" colspan="1" class="default">c_8</td>
                        <td rowspan="1" colspan="1" class="default"></td>
                        <td rowspan="1" colspan="1" class="default">c_7</td>
                        <td rowspan="1" colspan="1" class="default">c_6</td>
                        <td rowspan="1" colspan="1" class="default">c_5</td>
                        <td rowspan="1" colspan="1" class="default">c_4</td>
                        <td rowspan="1" colspan="1" class="default"></td>
                        <td rowspan="1" colspan="1" class="default">c_3</td>
                        <td rowspan="1" colspan="1" class="default">c_2</td>
                        <td rowspan="1" colspan="1" class="default">c_1</td>
                        <td rowspan="1" colspan="1" class="default">c_0</td>
                     </tr>
                  </tbody>
               </table>
               <p class="postspacer">&nbsp;</p>
               <p class="Paragraph">Notice that this Unicode range corresponds with the range of
		the Supplementary Characters.
		Further notice that the first word of the double-word UTF-16 representation
		is in the range 0xD800 … 0xDBFF
		(corresponding to the single-word UTF-16 representation of the high surrogate code points
		U+D800 … U+DBFF),
		and that the second word is in the range 0xDC00 … 0xDFFF
		(corresponding to the single-word UTF-16 representation of the low surrogate code points
		U+DC00 … U+DFFF).</p>
               <div class="subExampleSection">
                  <div class="subSectionTitle">Example</div>
                  <ul class="List">
                     <li class="ListItem">the Musical Symbol G Clef</li>
                     <li class="ListItem">is assigned to Unicode code point U+01D11E,</li>
                     <li class="ListItem">which corresponds to the 21-bit sequence 0 0001 1101 0001
                        			0001 1110,
                     </li>
                     <li class="ListItem">with an extra offset of 0x0F0000, this becomes the 21-bit
                        			sequence 1 0000 1101 0001 0001 1110,
                     </li>
                     <li class="ListItem">which is represented in double-word UTF-16 as 1101 1000
                        			0011 0100 1101 1101 0001 1110
                     </li>
                     <li class="ListItem">or in hexadecimal notation: D834 DD1E.</li>
                  </ul>
               </div>
            </div>
         </div>
         <div class="GeneralSection">
            <div class="subSectionTitle">Byte-serialized UTF-16</div>
            <p class="Paragraph">The UTF-16 standard is concerned with the internal machine
               	  representation of Unicode characters by means of a sequence of 16-bit words.
               	  The exact way the words are stored internally (perhaps breaking each word into
               	  two bytes) is irrelevant for most processing. However, interchange of textual
               	  data, particularly between computers of different architectural types, requires
               	  consideration of the exact ordering of the transmitted sequence of
               	  bytes.
            </p>
            <p class="Paragraph">The Unicode standard provides two different orders to serialize
               	  the 16-bit words of UTF-16 encoded Unicode characters into a stream of
               	  bytes:
            </p>
            <ul class="List">
               <li class="ListItem">big-endian serialization (UTF-16BE) first adds the most significant byte
                  		of a word to the stream and then the least significant byte;
               </li>
               <li class="ListItem">little-endian serialization (UTF-16LE) first adds the least significant byte
                  		of a word to the stream and then the most significant byte.
               </li>
            </ul>
            <p class="Paragraph">In the absence of a protocol by means of which sender and
               	  receiver may come to an agreement about the byte order, big-endian
               	  serialization must be used.
            </p>
            <p class="Paragraph">As an example, consider the following sequence of Unicode
               	  characters:
            </p>
            <ul class="List">
               <li class="ListItem">ASCII character 'A'</li>
               <li class="ListItem">Latin Small Letter C With Cedilla ç</li>
               <li class="ListItem">Euro Sign &euro;</li>
               <li class="ListItem">Musical Symbol G Clef.</li>
            </ul>
            <p class="Paragraph">In the examples above, the UTF-16 representation of each of
               	  these characters is given.
            </p>
            <p class="Paragraph">Taken together, the hexadecimal UTF-16 representation of the
               	  sequence of the four characters is: 0041 00E7 20AC D834 DD1E.
            </p>
            <p class="Paragraph">The UTF-16BE (big-endian byte-serialized UTF-16) representation
               	  of the four characters is: 00 41 00 E7 20 AC D8 34 DD 1E.
            </p>
            <p class="Paragraph">The UTF-16LE (little-endian byte-serialized UTF-16)
               	  representation of the four characters is: 41 00 E7 00 AC 20 34 D8 1E
               	  DD.
            </p>
         </div>
         <div class="RelatedTopics">
            <p class="RelatedTopicsSectionTitle">Related topics</p>
            <ul>
               <li class="RelTopic"><a href="../../progguide/misc/ascii_table.htm" class="manualLink">ASCII table (C0 Controls and Basic Latin)</a></li>
               <li class="RelTopic"><a href="../../progguide/misc/unicode.htm" class="manualLink">Unicode</a></li>
               <li class="RelTopic"><a href="../../progguide/misc/utf8.htm" class="manualLink">UTF-8 Encoding</a></li>
               <li class="RelTopic"><a href="../../progguide/misc/utft.htm" class="manualLink">UTF-T Encoding</a></li>
            </ul>
         </div>
         <p>&nbsp;</p>
         <table class="noborder" border="0" cellpadding="0" cellspacing="5">
            <tr>
               <td class="noborder"><img src="../../skin/mail.gif" alt="Send Us Your Feedback About this Help Page"></td>
               <td class="noborder"><a class="FeedbackLink" href="mailto:documentation@infor.com?Subject=Feedback on /progguide/misc/utf16, 10.4.2, en">Send Us Your Feedback About this Help Page</a></td>
            </tr>
         </table>
      </div>
   </body>
</html>