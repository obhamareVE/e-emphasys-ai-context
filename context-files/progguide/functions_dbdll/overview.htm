<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
      <title>DB DLL Overview</title>
      <link rel="stylesheet" type="text/css" href="../../skin/General.css">
      <link rel="stylesheet" type="text/css" href="../../skin/MSHtmlHelp.css">
      <meta name="keywords" content="DB DLL DBDLL ">
      <meta name="author" content="Infor">
      <meta name="ROBOTS" content="ALL">
   </head>
   <body id="body">
      <div class="TopicTitle">DB DLL Overview</div>
      <div class="body">
         <div class="GeneralSection">
            <div class="subSectionTitle">Overview</div>
            <p class="Paragraph">A DB DLL (DBDLL) is a DLL with the same name as a standard DAL with the extension 'db'. 
               E.g. 'whinh200db' for table whinh200. 
               A DBDLL can be implemented in order to be able to log database actions (insert update or delete)
               by means of specific hooks that will be executed by the <a href="../../progguide/glossary/glossary.htm#fourgl_engine" class="glossaryLink">4GL engine</a> and/or DAL Engine. Stand-alone database operations (not triggered by saves and deletes of the <a href="../../progguide/glossary/glossary.htm#fourgl_engine" class="glossaryLink">4GL engine</a> or DAL Engine) are also 
               extended to perform the extra business logic before and after performing the actual database operation. In this way it is
               possible to log database actions.
            </p>
         </div>
         <div class="GeneralSection">
            <div class="subSectionTitle">Interaction with 4GL Engine / DAL Engine</div>
            <p class="Paragraph">When present, the DB DLL for a certain table will be loaded by the <a href="../../progguide/glossary/glossary.htm#fourgl_engine" class="glossaryLink">4GL engine</a>/DAL Engine by the time the 
               	  DAL for this particular table will be loaded. In situations where no DAL is present this will be the moment at which a
               
               	  DAL would be loaded if it existed. This means that there is no need to have a DAL in order to make use of the DBDLL.
            </p>
         </div>
         <div class="GeneralSection">
            <div class="subSectionTitle">Interaction with db operations</div>
            <p class="Paragraph">When one of the following database operations is executed stand-alone (so not as part of the standard save/deletes of the
               4GL Engine or DAL Engine):
            </p>
            <ul class="List">
               <li class="ListItem"><a href="../../progguide/functions_db_operations/db.insert.htm" class="manualLink">db.insert()</a></li>
               <li class="ListItem"><a href="../../progguide/functions_db_operations/db.update.htm" class="manualLink">db.update()</a></li>
               <li class="ListItem"><a href="../../progguide/functions_db_operations/db.delete.htm" class="manualLink">db.delete()</a></li>
            </ul>
            <p class="Paragraph">and the DB DLL for the related table is present, the DBDLL will be loaded prior the database operation. This means that there
               is no need to have a DAL or a session in order to make use of the DBDLL.
               	  During the execution of the hooks (initiated by a database operation) the boolean initiated.by.dal will be false.
            </p>
         </div>
         <div class="GeneralSection">
            <div class="subSectionTitle">Preconditions</div>
            <p class="Paragraph">A DLL becomes a DBDLL when it meets the following conditions:</p>
            <ul class="List">
               <li class="ListItem">Its name is consisting of the table code with 'db' as suffix, like whinh200db</li>
               <li class="ListItem">It includes bic_dal, as follows: <code class="Code">#include &lt;bic_dal&gt;</code></li>
            </ul>
         </div>
         <div class="GeneralSection">
            <div class="subSectionTitle">Restrictions</div>
            <p class="Paragraph">A DBDLL is treated like a regular DAL. This means all kind of DAL related functionality can be used, like:</p>
            <ul class="List">
               <li class="ListItem">Function <code class="Code"> <a href="../../progguide/functions_db_operations/with.old.object.values.do.htm" class="manualLink">with.old.object.values.do()</a></code></li>
               <li class="ListItem">Function <code class="Code"> <a href="../../progguide/functions_db_operations/with.object.set.do.htm" class="manualLink">with.object.set.do()</a></code></li>
               <li class="ListItem">Pre-defined variable <code class="Code">subdal</code></li>
            </ul>
            <p class="Paragraph">Note however that the following restrictions apply:</p>
            <ul class="List">
               <li class="ListItem">Business methods cannot be implemented in a DBDLL Instead the business logic should be programmed in another 
                  				(separate) general DLL.
               </li>
               <li class="ListItem">It is strongly discouraged to define other external functions in a DBDLL and link the DBDLL directly to 
                  				other scripts. Instead, use a normal general DLL. (This also applies to regular DALs).
               </li>
            </ul>
            <p class="Paragraph">The execution of db hooks can be enabled/disable with the following commands</p>
            <ul class="List">
               <li class="ListItem"><code class="Code"> <a href="../../progguide/functions_dbdll/disable.db.dll.htm" class="manualLink">disable.db.dll()</a></code></li>
               <li class="ListItem"><code class="Code"> <a href="../../progguide/functions_dbdll/enable.db.dll.htm" class="manualLink">enable.db.dll()</a></code></li>
            </ul>
         </div>
         <div class="GeneralSection">
            <div class="subSectionTitle">DB Hooks</div>
            <p class="Paragraph">A DBDLL script can contain the following hooks:</p>
            <ul class="List">
               <li class="ListItem"><code class="Code"> <a href="../../progguide/functions_dbdll/db.before.insert.htm" class="manualLink">db.before.insert()</a></code></li>
               <li class="ListItem"><code class="Code"> <a href="../../progguide/functions_dbdll/db.after.insert.htm" class="manualLink">db.after.insert()</a></code></li>
               <li class="ListItem"><code class="Code"> <a href="../../progguide/functions_dbdll/db.before.update.htm" class="manualLink">db.before.update()</a></code></li>
               <li class="ListItem"><code class="Code"> <a href="../../progguide/functions_dbdll/db.after.update.htm" class="manualLink">db.after.update()</a></code></li>
               <li class="ListItem"><code class="Code"> <a href="../../progguide/functions_dbdll/db.before.delete.htm" class="manualLink">db.before.delete()</a></code></li>
               <li class="ListItem"><code class="Code"> <a href="../../progguide/functions_dbdll/db.after.delete.htm" class="manualLink">db.after.delete()</a></code></li>
            </ul>
         </div>
         <div class="GeneralSection">
            <div class="subSectionTitle">Flow of hooks</div>
            <p class="Paragraph">In case a DAL is involved, as well as a UE DLL, the flow of the hooks is as follows (example of an insert):</p>
            <ul class="List">
               <li class="ListItem">1.	ue.before.before.save.object (in UE DLL)</li>
               <li class="ListItem">2.	before.save.object (in DAL)</li>
               <li class="ListItem">3.	ue.after.before.save.object (in UE DLL)</li>
               <li class="ListItem">4.	db.before.insert (in DB DLL)</li>
               <li class="ListItem">5.	&lt;actual db.insert&gt;</li>
               <li class="ListItem">6.	db.after.insert (in DB DLL)</li>
               <li class="ListItem">7.	ue.before.after.save.object (in UE DLL)</li>
               <li class="ListItem">8.	after.save.object (in DAL)</li>
               <li class="ListItem">9.	ue.after.after.save.object (in UE DLL)</li>
            </ul>
         </div>
         <div class="RelatedTopics">
            <p class="RelatedTopicsSectionTitle">Related topics</p>
            <ul>
               <li class="RelTopic"><a href="../../progguide/functions_dal/overview.htm" class="manualLink">Data Access Layer</a> <a href="../../progguide/functions_dbdll/overview.htm" class="manualLink">DB DLL Overview</a></li>
            </ul>
         </div>
         <p>&nbsp;</p>
         <table class="noborder" border="0" cellpadding="0" cellspacing="5">
            <tr>
               <td class="noborder"><img src="../../skin/mail.gif" alt="Send Us Your Feedback About this Help Page"></td>
               <td class="noborder"><a class="FeedbackLink" href="mailto:documentation@infor.com?Subject=Feedback on /progguide/functions_dbdll/overview, 10.4.2, en">Send Us Your Feedback About this Help Page</a></td>
            </tr>
         </table>
      </div>
   </body>
</html>