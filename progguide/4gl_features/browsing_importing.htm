<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
      <title>Importing variables</title>
      <link rel="stylesheet" type="text/css" href="../../skin/General.css">
      <link rel="stylesheet" type="text/css" href="../../skin/MSHtmlHelp.css">
      <meta name="keywords" content="automatic import browsing importing variables zooming importing variables ">
      <meta name="author" content="Infor">
      <meta name="ROBOTS" content="ALL">
   </head>
   <body id="body">
      <div class="TopicTitle">Importing variables</div>
      <div class="body">
         <div class="GeneralSection">
            <p class="Paragraph">The browse list session needs to import one or more variables
               		from the parent session. Based on the imported values, the
               		browse list session reads records from the maintable and
               		displays them.
            </p>
         </div>
         <div class="GeneralSection">
            <div class="subSectionTitle">Automatic import</div>
            <p class="Paragraph">The <a href="../../progguide/glossary/glossary.htm#fourgl_engine" class="glossaryLink">4GL engine</a> automatically imports variables (i.e. the primary key values). This happens in the following 
               		5 situations:
            </p>
         </div>
         <div class="GeneralSection">
            <div class="subSectionTitle">1. Table reference exists from parent field to main table of child session</div>
            <div class="subGeneralSection">
               <div class="subSectionTitle">Situation</div>
               <p class="Paragraph">A browse list session with main table Y is started from a parent session with main table X.
                  			Table X has a reference (foreign key) to table Y.
               </p>
            </div>
            <div class="subGeneralSection">
               <div class="subSectionTitle">Result</div>
               <p class="Paragraph">The <a href="../../progguide/glossary/glossary.htm#fourgl_engine" class="glossaryLink">4GL engine</a> imports the browse field(s) from table X and stores them in the primary key fields of table Y.
               </p>
            </div>
            <div class="subGeneralSection">
               <div class="subSectionTitle">Consequences for programming in UI script</div>
               <p class="Paragraph">None</p>
            </div>
            <div class="subExampleSection">
               <div class="subSectionTitle">Example</div>
               <p class="Paragraph">The Currency field in the Business Partner table refers to the Currency table.</p>
               <p class="Paragraph">When the Currencies browse session is started by browsing from the Currency field on the 
                  			Business Partner session, the <a href="../../progguide/glossary/glossary.htm#fourgl_engine" class="glossaryLink">4GL engine</a> imports the Currency field from the Business Partner to the Currency field of the Currency table.
               </p>
            </div>
         </div>
         <div class="GeneralSection">
            <div class="subSectionTitle">2. Table reference exists from main table of child session to main table of parent session</div>
            <div class="subGeneralSection">
               <div class="subSectionTitle">Situation</div>
               <p class="Paragraph">A browse list session with main table Y is started from a parent session with main table X. 
                  			A field in table Y refers to table X. (In most cases, there is an identifying relationship 
                  			between table X and table Y, e.g. order header (table X) and order lines (table Y).)
               </p>
            </div>
            <div class="subGeneralSection">
               <div class="subSectionTitle">Result</div>
               <p class="Paragraph">The <a href="../../progguide/glossary/glossary.htm#fourgl_engine" class="glossaryLink">4GL engine</a> imports the primary key fields from table X and stores them in the primary key fields of table Y.
               </p>
            </div>
            <div class="subExampleSection">
               <div class="subSectionTitle">Example</div>
               <p class="Paragraph">Primary key of table X is order number. Primary key of table Y is order number, position number.</p>
               <p class="Paragraph">The 4GL engine imports the order number from table Orders to the
                  			corresponding field of table Order Lines. The position number field remains empty.
               </p>
            </div>
            <div class="subGeneralSection">
               <div class="subSectionTitle">Consequences for programming in UI script</div>
               <p class="Paragraph">None</p>
               <div class="Note">
                  <div class="NoteSectionTitle"><strong class="GUIRef">Note</strong></div>
                  <div class="NoteContent">
                     <p class="Paragraph">Automatic import is not possible if two or more main table fields of the child session 
                        				have a reference to the main table of the parent session. In this case the bshell will 
                        				import one of the fields. From application development point of view, 
                        				it is unpredictable which field.
                     </p>
                  </div>
               </div>
            </div>
         </div>
         <div class="GeneralSection">
            <div class="subSectionTitle">3. Same main table for parent session and child session</div>
            <div class="subGeneralSection">
               <div class="subSectionTitle">Situation</div>
               <p class="Paragraph">A browse list session with main table X is started from a parent session with with the same main table.</p>
            </div>
            <div class="subGeneralSection">
               <div class="subSectionTitle">Result</div>
               <p class="Paragraph">The <a href="../../progguide/glossary/glossary.htm#fourgl_engine" class="glossaryLink">4GL engine</a> imports the primary key values from the parent session of table X and stores them in the primary 
                  			key fields of table X in the browse list session.
               </p>
            </div>
            <div class="subExampleSection">
               <div class="subSectionTitle">Example</div>
               <p class="Paragraph">The user browses from the Business Partner Details session to the Business Partners browse list session
                  			to select a Parent Business Partner.
               </p>
            </div>
            <div class="subGeneralSection">
               <div class="subSectionTitle">Consequences for programming in UI script</div>
               <p class="Paragraph">Often a hierarchical structure exists in the same table. In those cases you want to override 
                  			the automatic import by the 4GL engine, since not the primary key values should be imported, 
                  			but the value of the browse field (e.g. the Business Partner Parent field) and that value should 
                  			be stored in the primary key fields of the maintable of the browse list session. You should also 
                  			take care of saving and restoring the primary key values, otherwise the record pointer of the 
                  			parent session is set incorrectly.
               </p><pre class="CodeBlock">
declaration:

        table   ttcom100 |* Business Partners
        
        domain  tccom.bpid      hold.bpid
        
field.tccom100.prbp: |* Parent business partner
before.zoom:
        |* Save the primary key field
        hold.bpid = tccom100.bpid
        tccom100.bpid = tccom100.prbp
after.zoom:
        |* Restore the primary key field
        tccom100.bpid = hold.bpid
</pre></div>
         </div>
         <div class="GeneralSection">
            <div class="subSectionTitle">4. Parent session without main table</div>
            <div class="subGeneralSection">
               <div class="subSectionTitle">Situation</div>
               <p class="Paragraph">A browse list session with main table X is started from a parent session without a main table 
                  			(e.g. a print session).
               </p>
            </div>
            <div class="subGeneralSection">
               <div class="subSectionTitle">Result</div>
               <p class="Paragraph">The <a href="../../progguide/glossary/glossary.htm#fourgl_engine" class="glossaryLink">4GL engine</a> imports the primary key values of table X (if available) from the parent process and stores them in the primary key 
                  			fields of the browse list sessions' main table.
               </p>
            </div>
            <div class="subExampleSection">
               <div class="subSectionTitle">Example</div>
               <p class="Paragraph">Browse list session Business Partners is started from the parent session Print Business Partners. 
                  			The main table of the browse list session is tccom100. The 4GL engine tries to import tccom100.bpid 
                  			from the print session and stores it in the tccom100.bpid field of the main table of the browse list 
                  			session.
               </p>
            </div>
            <div class="subGeneralSection">
               <div class="subSectionTitle">Consequences for programming in UI script</div>
               <p class="Paragraph">In many cases you will have to re-program the parent session in such a way that the primary key 
                  			fields of the main table of the browse list session are filled.
               </p><pre class="CodeBlock">
declaration:

        table   ttcom100 |* Business Partners

field.bpid.f:
before.zoom:
        tccom100.bpid = bpid.f
</pre></div>
         </div>
         <div class="GeneralSection">
            <div class="subSectionTitle">5. No relationship between tables</div>
            <div class="subGeneralSection">
               <div class="subSectionTitle">Situation</div>
               <p class="Paragraph">A browse list session with main table Y starts from a parent session with main table X. 
                  			There is no relationship between table X and table Y (e.g. in case of an integration 
                  			between packages).
               </p>
            </div>
            <div class="subGeneralSection">
               <div class="subSectionTitle">Result</div>
               <p class="Paragraph">The <a href="../../progguide/glossary/glossary.htm#fourgl_engine" class="glossaryLink">4GL engine</a> imports the primary key values of table Y from the parent session and stores them in the primary key fields of 
                  			table Y of the browse list session.
               </p>
            </div>
            <div class="subGeneralSection">
               <div class="subSectionTitle">Consequences for programming in UI script</div>
               <p class="Paragraph">In many cases you will have to re-program the parent session in such a way that the primary key 
                  			fields of the main table of the browse list session are filled.
               </p>
            </div>
            <div class="subExampleSection">
               <div class="subSectionTitle">Example</div>
               <p class="Paragraph">Example: (Browsing to Freight Service Levels from Warehousing Orders)</p><pre class="CodeBlock">
declaration:

        table   tfmfmd070

field.whinh200.serv:
before.zoom:
        fmfmd070.serv = whinh200.serv
		</pre></div>
            <div class="Note">
               <div class="NoteSectionTitle"><strong class="GUIRef">Note</strong></div>
               <div class="NoteContent">
                  <p class="Paragraph">For purposes of clarity the example does not use integration DLLs, nor does it use start.session() 
                     				to start the browse list.
                  </p>
               </div>
            </div>
         </div>
         <div class="GeneralSection">
            <div class="subSectionTitle">Overriding Automatic Import</div>
            <p class="Paragraph">Automatic import only works when the browse list starts with the
               		primary key. With dynamic index switching it is also possible to start the
               		browse list with other keys. In that case automatic import can give wrong
               		results.
            </p>
            <p class="Paragraph">Because of this and other reasons the application wants to
               		override automatic import. The application might implement browsing as
               		mentioned above at point 5. However the application can also choose to use
               		zoom.* variables in these cases. (The name of these variables does not matter,
               		however it is common practice to name them zoom.*).
            </p>
         </div>
         <div class="ExampleSection">
            <div class="subSectionTitle">Example</div>
            <p class="Paragraph">Parent session UI script</p><pre class="CodeBlock">
declaration:

extern  domain  tccom.bpid      zoom.bpid

field.whinh200.stco: |* Ship to BP
before.zoom:
        zoom.bpid = whinh200.stco
</pre><p class="Paragraph">Browse list session UI script</p><pre class="CodeBlock">
declaration:

        table   ttccom111

zoom.from.all:
on.entry:
        import("zoom.bpid", tccom111.stbp)
</pre></div>
         <div class="ExampleSection">
            <div class="subSectionTitle">Example</div>
            <p class="Paragraph">(E.g. browsing to Business Partners by Parent Business Partner)</p>
            <p class="Paragraph">Parent session UI script</p><pre class="CodeBlock">
declaration:

extern  domain  tccom.bpid      zoom.bpid |* BP id
extern  domain  tccom.bpid      zoom.prbp |* Parent BP

field.ppmmm999.bpid:
before.zoom:
        attr.zoomindex = 2 |* Start with index 2
        zoom.prbp = ppmmm999.prbp
        zoom.bpid = ppmmm999.bpid
</pre><p class="Paragraph">Browse list session UI script</p><pre class="CodeBlock">
declaration:

        table   ttccom100

zoom.from.all:
on.entry:
        on case curr.key
        case 1:
                |* Automatic import
                break
        case 2:
                import("zoom.prbp", tccom100.prbp)
                import("zoom.bpid", tccom100.bpid)
                break
        endcase
</pre></div>
         <div class="Note">
            <div class="NoteSectionTitle"><strong class="GUIRef">Note</strong></div>
            <div class="NoteContent">
               <p class="Paragraph">Note that the start option of the browse list session can cause
                  			this not to work (e.g. when this is set to get.defaults). It is recommended to
                  			use the default start option instead.
               </p>
            </div>
         </div>
         <div class="RelatedTopics">
            <p class="RelatedTopicsSectionTitle">Related topics</p>
            <ul>
               <li class="RelTopic"><a href="../../progguide/4gl_features/browsing_definition.htm" class="manualLink">Definition</a></li>
               <li class="RelTopic"><a href="../../progguide/4gl_features/browsing_overview.htm" class="manualLink">Overview of browsing</a></li>
               <li class="RelTopic"><a href="../../progguide/4gl_features/browsing_exporting.htm" class="manualLink">Exporting variables</a></li>
               <li class="RelTopic"><a href="../../progguide/4gl_features/browsing_starting.htm" class="manualLink">Starting a browse list session</a></li>
            </ul>
         </div>
         <p>&nbsp;</p>
         <table class="noborder" border="0" cellpadding="0" cellspacing="5">
            <tr>
               <td class="noborder"><img src="../../skin/mail.gif" alt="Send Us Your Feedback About this Help Page"></td>
               <td class="noborder"><a class="FeedbackLink" href="mailto:documentation@infor.com?Subject=Feedback on /progguide/4gl_features/browsing_importing, 10.4.2, en">Send Us Your Feedback About this Help Page</a></td>
            </tr>
         </table>
      </div>
   </body>
</html>