<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
      <title>Error handling</title>
      <link rel="stylesheet" type="text/css" href="../../skin/General.css">
      <link rel="stylesheet" type="text/css" href="../../skin/MSHtmlHelp.css">
      <meta name="keywords" content="SQL error handling database handling error handling error handling, database ">
      <meta name="author" content="Infor">
      <meta name="ROBOTS" content="ALL">
   </head>
   <body id="body">
      <div class="TopicTitle">Error handling</div>
      <div class="body">
         <div class="GeneralSection">
            <p class="Paragraph">There are three broad categories of errors. Errors generated
               by the operating system (numbers 1 - 99), errors generated by
               the Baan database system (numbers 100 - 900) and errors
               generated by the underlying RDBMS (numbers 1000 and upwards ).
               In case of an RDBMS error, the actual (native) error code can be
               obtained by substracting 1000 from the Baan error code. See <a href="../../progguide/errors/overview.htm" class="manualLink">Infor ES errors and messages</a></p>
            <p class="Paragraph">To keep the messages to be sent over the network to a
               minimum, database actions and messages must be buffered as much
               as possible. Buffering updates means that as few updates as
               possible return error codes. These, after all, cause a rollback
               and a return to a retry point. It is therefore possible to
               allocate flags to updates indicating the action to be taken by
               the system when a database action fails. The database server
               will then no longer execute a rollback, but a follow-up
               action.
            </p>
         </div>
         <div class="GeneralSection">
            <div class="subSectionTitle">Fatal and non-fatal errors</div>
            <p class="Paragraph">There are fatal and non-fatal errors. Fatal errors terminate
               the session. Non-fatal errors are those that are temporary (for
               example, elocked), or that are caused by a multi-user situation
               (for example, a record is deleted by two processes, one process
               receiving enorec). Non-fatal errors cause the program to go back
               to the last retry point. If this is missing, the session is
               terminated. Fatal errors are errors caused by:
            </p>
            <ul class="List">
               <li class="ListItem">Errors in the (logical) database (for example, enotable,
                  eddcorrupt, enoserver)
               </li>
               <li class="ListItem">Errors in the underlying (R)DBMS (for example,
                  ebadkey)
               </li>
               <li class="ListItem">Program errors (for example, enotinrange)</li>
            </ul>
            <p class="Paragraph">The following error codes result in a return to the retry
               point:
            </p>
            <table width="80%" class="default">
               <tbody noTR="8" class="default">
                  <tr no="1" isLast="false" class="default">
                     <td rowspan="1" colspan="1" class="default">elocked</td>
                     <td rowspan="1" colspan="1" class="default">(107)</td>
                     <td rowspan="1" colspan="1" class="default">record is locked</td>
                  </tr>
                  <tr no="2" isLast="false" class="default">
                     <td rowspan="1" colspan="1" class="default">eflocked</td>
                     <td rowspan="1" colspan="1" class="default">(113)</td>
                     <td rowspan="1" colspan="1" class="default">file (table) is locked</td>
                  </tr>
                  <tr no="3" isLast="false" class="default">
                     <td rowspan="1" colspan="1" class="default">emlocked</td>
                     <td rowspan="1" colspan="1" class="default">(210)</td>
                     <td rowspan="1" colspan="1" class="default">record in mirroring is locked</td>
                  </tr>
                  <tr no="4" isLast="false" class="default">
                     <td rowspan="1" colspan="1" class="default">ereflocked</td>
                     <td rowspan="1" colspan="1" class="default">(601)</td>
                     <td rowspan="1" colspan="1" class="default">reference record is locked</td>
                  </tr>
                  <tr no="5" isLast="false" class="default">
                     <td rowspan="1" colspan="1" class="default">edupl</td>
                     <td rowspan="1" colspan="1" class="default">(100)</td>
                     <td rowspan="1" colspan="1" class="default">duplicate record</td>
                  </tr>
                  <tr no="6" isLast="false" class="default">
                     <td rowspan="1" colspan="1" class="default">enorec</td>
                     <td rowspan="1" colspan="1" class="default">(111)</td>
                     <td rowspan="1" colspan="1" class="default">record not present</td>
                  </tr>
                  <tr no="7" isLast="false" class="default">
                     <td rowspan="1" colspan="1" class="default">erowchanged</td>
                     <td rowspan="1" colspan="1" class="default">(201)</td>
                     <td rowspan="1" colspan="1" class="default">record modified since last read</td>
                  </tr>
                  <tr no="8" isLast="true" class="default">
                     <td rowspan="1" colspan="1" class="default">eabort</td>
                     <td rowspan="1" colspan="1" class="default">(850)</td>
                     <td rowspan="1" colspan="1" class="default">rollback in (R)DBMS</td>
                  </tr>
               </tbody>
            </table>
            <p class="postspacer">&nbsp;</p>
         </div>
         <div class="GeneralSection">
            <div class="subSectionTitle">The eflag</div>
            <p class="Paragraph">For a number of errors it is possible to indicate which
               action the system must carry out when the error occurs. You can
               add these to a database action with the &lt;eflag&gt;. For
               example:
            </p><pre class="CodeBlock">
db.insert(table, DB.RETRY [, eflag])
db.update(table, DB.RETRY [, eflag])
db.delete(table, DB.RETRY [, eflag])
</pre><p class="Paragraph">The following flags are available for eflag:</p>
            <table border="0" class="none">
               <tbody noTR="13" class="none">
                  <tr no="1" isLast="false" class="none">
                     <td rowspan="1" colspan="1" class="none"><pre class="Formula">
db.exit.on.norec
</pre></td>
                     <td rowspan="1" colspan="1" class="none">stop session if no record was found</td>
                  </tr>
                  <tr no="2" isLast="false" class="none">
                     <td rowspan="1" colspan="1" class="none"><pre class="Formula">
db.skip.norec
</pre></td>
                     <td rowspan="1" colspan="1" class="none">skip update/delete action if no record was found</td>
                  </tr>
                  <tr no="3" isLast="false" class="none">
                     <td rowspan="1" colspan="1" class="none"><pre class="Formula">
db.exit.on.dupl
</pre></td>
                     <td rowspan="1" colspan="1" class="none">stop session if duplicates occur</td>
                  </tr>
                  <tr no="4" isLast="false" class="none">
                     <td rowspan="1" colspan="1" class="none"><pre class="Formula">
db.skip.dupl
</pre></td>
                     <td rowspan="1" colspan="1" class="none">skip update/insert action if duplicates occur</td>
                  </tr>
                  <tr no="5" isLast="false" class="none">
                     <td rowspan="1" colspan="1" class="none"><pre class="Formula">
db.exit.on.rowchanged
</pre></td>
                     <td rowspan="1" colspan="1" class="none">stop session if record has been changed after
                        delayed lock
                     </td>
                  </tr>
                  <tr no="6" isLast="false" class="none">
                     <td rowspan="1" colspan="1" class="none"><pre class="Formula">
db.skip.rowchanged
</pre></td>
                     <td rowspan="1" colspan="1" class="none">skip action if record has been changed after delayed
                        lock
                     </td>
                  </tr>
                  <tr no="7" isLast="false" class="none">
                     <td rowspan="1" colspan="1" class="none"><pre class="Formula">
db.return.error*
</pre></td>
                     <td rowspan="1" colspan="1" class="none">return error code</td>
                  </tr>
                  <tr no="8" isLast="false" class="none">
                     <td rowspan="1" colspan="1" class="none"><pre class="Formula">
db.return.norec*
</pre></td>
                     <td rowspan="1" colspan="1" class="none">return error code if no record was found</td>
                  </tr>
                  <tr no="9" isLast="false" class="none">
                     <td rowspan="1" colspan="1" class="none"><pre class="Formula">
db.return.dupl*
</pre></td>
                     <td rowspan="1" colspan="1" class="none">return error code if duplicates occur</td>
                  </tr>
                  <tr no="10" isLast="false" class="none">
                     <td rowspan="1" colspan="1" class="none"><pre class="Formula">
db.return.ref.exists*
</pre></td>
                     <td rowspan="1" colspan="1" class="none">return error code if reference exists</td>
                  </tr>
                  <tr no="11" isLast="false" class="none">
                     <td rowspan="1" colspan="1" class="none"><pre class="Formula">
db.return.ref.not.exists*
</pre></td>
                     <td rowspan="1" colspan="1" class="none">return error code if reference does not exist</td>
                  </tr>
                  <tr no="12" isLast="false" class="none">
                     <td rowspan="1" colspan="1" class="none"><pre class="Formula">
db.return.rowchanged*
</pre></td>
                     <td rowspan="1" colspan="1" class="none">return error code if record has been changed after
                        delayed lock
                     </td>
                  </tr>
                  <tr no="13" isLast="true" class="none">
                     <td rowspan="1" colspan="1" class="none"><pre class="Formula">
db.return.dbcm.action.not.allowed*
</pre></td>
                     <td rowspan="1" colspan="1" class="none">return error code if action has been disallowed because of change management</td>
                  </tr>
               </tbody>
            </table>
            <p class="postspacer">&nbsp;</p>
            <p class="Paragraph">* The program does not return to the retry point.</p>
            <p class="Paragraph">Note that you can combine flags by using the '+' sign.</p>
            <div class="subExampleSection">
               <div class="subSectionTitle">Example</div><pre class="CodeBlock">
table   ttiitm001
db.retry.point()
SELECT tiitm001.*
FROM tiitm001 FOR UPDATE
WHERE tiitm001.item between :item.f and :item.t
SELECTDO
        ......
        db.insert(ttiitm001, DB.RETRY, db.skip.dupl)
ENDSELECT
</pre><p class="Paragraph">In this case, the flag 'db.skip.dupl' causes the system
                  neither to go back to the retry point nor return an error code
                  when adding an already existing record.
               </p>
            </div>
         </div>
         <div class="RelatedTopics">
            <p class="RelatedTopicsSectionTitle">Related topics</p>
            <ul>
               <li class="RelTopic"><a href="../../progguide/functions_database_handling/overview.htm" class="manualLink">Database handling overview</a></li>
               <li class="RelTopic"><a href="../../progguide/functions_database_handling/baan_sql.htm" class="manualLink">Infor ERP Enterprise SQL</a></li>
            </ul>
         </div>
         <p>&nbsp;</p>
         <table class="noborder" border="0" cellpadding="0" cellspacing="5">
            <tr>
               <td class="noborder"><img src="../../skin/mail.gif" alt="Send Us Your Feedback About this Help Page"></td>
               <td class="noborder"><a class="FeedbackLink" href="mailto:documentation@infor.com?Subject=Feedback on /progguide/functions_database_handling/error_handling, 10.4.2, en">Send Us Your Feedback About this Help Page</a></td>
            </tr>
         </table>
      </div>
   </body>
</html>