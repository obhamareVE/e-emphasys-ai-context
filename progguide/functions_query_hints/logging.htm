<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
      <title>Logging</title>
      <link rel="stylesheet" type="text/css" href="../../skin/General.css">
      <link rel="stylesheet" type="text/css" href="../../skin/MSHtmlHelp.css">
      <meta name="keywords" content="logging, of query hints query hints logging ">
      <meta name="author" content="Infor">
      <meta name="ROBOTS" content="ALL">
   </head>
   <body id="body">
      <div class="TopicTitle">Logging</div>
      <div class="body">
         <div class="GeneralSection">
            <p class="Paragraph">You can use the logging information of the driver to see if the
               hints you added have taken effect. Logging information differs
               between level-1 drivers and the Oracle level-2 driver. All logging
               is done in the dbs.log file.
            </p>
         </div>
         <div class="GeneralSection">
            <div class="subSectionTitle">Buffer hint</div>
            <p class="Paragraph">Set TT_SQL_TRACE=4000 and DBSLOG=2000. The logfile will
               contain an entry: RDS_FULL: &lt;buffer size&gt;.
            </p>
         </div>
         <div class="GeneralSection">
            <div class="subSectionTitle">Array fetching hint</div>
            <p class="Paragraph">Set DBSLOG=1000 if the array fetching hint is applied to
               logfile will show one of the entries:
            </p>
            <p class="Paragraph"><code class="Code">Hint used: array fetching enabled
                  Hint used: array fetching disabled</code></p>
         </div>
         <div class="GeneralSection">
            <div class="subSectionTitle">Array size hint</div>
            <p class="Paragraph">Set DBSLOG=1000. If the array size hint applies the
               logfile will show the entry:
            </p>
            <p class="Paragraph"><code class="Code">Hint used: array size set to &lt;array
                  size&gt;</code></p>
         </div>
         <div class="GeneralSection">
            <div class="subSectionTitle">Index, row mode, string, ordered and 'no hints' hint</div>
            <p class="Paragraph">For the Oracle level-2 driver the hints index, row mode,
               string, ordered and 'no hints' all effect the Oracle native
               hint that is added to SQL query that is sent to the Oracle
               RDBMS. If you set DBSLOG=400 the driver will log the SQL
               query that is sent to the Oracle RDBMS, this includes the
               hints.
            </p>
            <p class="Paragraph">On a level-1 driver only the index hint and ordered hint
               are applicable, the row mode, string and 'no hints' hint are
               ignored.
            </p>
            <p class="Paragraph">To see the effect of the ordered hint on a level-1
               driver set TT_SQL_TRACE=4000 and DBSLOG=2000. The driver will
               log the generated query execution tree. For the main query
               and each subquery the execution tree shows a section
               'Tables'. This section lists the tables in the order in which
               they are processed. For example:
            </p><pre class="CodeBlock">
select a.bpid, b.bpid
from   tccom100 b, tfgld106 a
where  a.bpid = b.bpid
hint   ordered
</pre><p class="Paragraph">For this query the dbs.log file will show in the query
               execution tree a section that looks as follows:
            </p><pre class="CodeBlock">
Query 4006e078 flag 0100000
<i class="Emphasis">Tables</i>
         <i class="Emphasis">tccom100</i> (a) dep 1 flag 014
      Used columns
      tccom100(a).bpid
<i class="Emphasis">tfgld106</i> (b) dep 2 flag 014
      Used columns
      tfgld106(b).bpid
</pre><p class="Paragraph">The effect of index hints can be read in the log file from
               the generated query execution tree. The tree is logged when
               TT_SQL_TRACE=4000 and DBSLOG=2000. The information that
               states which indexes are used to scan the tables can be read
               from the section "view expression".
            </p>
            <p class="Paragraph">For example take the following query:</p><pre class="CodeBlock">
select  iscn, bpid
from    tccom100
where   (iscn = 570 or cadr = 'J10000001') and bpid = 'NAVEEN'
hint    use index 4,5 on tccom100 desc
</pre><p class="Paragraph">In the log file the execution tree starts with the entry
               "Generated Query Execution Tree:", the section "view
               expression" is logged below this. For the above query the
               view expression section looks as follows:
            </p><pre class="CodeBlock">
View expression
[4] flag 011 cost 0 next_eval 9 next 9
   Table View on 'tccom100'
   Expression:
      [1] (hinted) flag 041 cost 5 next_eval -1 next 0
         [2] (hinted) flag 044 cost 5 next_eval 0 next 3
            [2] <i class="Emphasis">(hinted)</i> flag 051 cost 5 next_eval -1 next -1
<i class="Emphasis">SrchOper for tccom100</i> compnr logic:111 physic:111,
<i class="Emphasis">index 4</i> (mode 0)
                  Field cadr:
                     Equal: [=] Bind (Col cadr) Value: 'J10000001'
                  Field bpid:
                     Equal: [=] Bind (Col bpid) Value: 'NAVEEN'
         UNION (04)
         [3] (hinted) flag 044 cost 5 next_eval 0 next -1
            [3] <i class="Emphasis">(hinted)</i> flag 051 cost 5 next_eval -1 next -1
<i class="Emphasis">SrchOper for tccom100</i> compnr logic:111 physic:111,
<i class="Emphasis">index 5</i> (mode 0)
                  Field iscn:
                     Equal: [=] Bind (Col iscn) Value: '570'
                  Field bpid:
                     Equal: [=] Bind (Col bpid) Value: 'NAVEEN'
      AND (011)
      [0] flag 011 cost 3 next_eval 8 next 8
         Operand1: Index Col key 1 mode 1 equal 1 order 0
               tccom100(a).bpid
         Operator: =
         Operand2: Bind (Col bpid) Value: 'NAVEEN'
</pre><p class="Paragraph">Each "SrchOper" section in the view expression describes
               an index scan. Here there are two such "SrchOper" sections
               for the table tccom100. This indicates the table is accessed
               using two index scans. The first is on index 4, the second on
               index 5 exactly according to specified hint. The log output
               also shows the word "hinted" for both "SrchOper" sections.
               This means the query processor has indeed applied the index
               hint and that it is not a coincidence that indexes 4 and 5
               are used to scan the table.
            </p>
         </div>
         <div class="RelatedTopics">
            <p class="RelatedTopicsSectionTitle">Related topics</p>
            <ul>
               <li class="RelTopic"><a href="../../progguide/functions_query_hints/hint_types.htm" class="manualLink">Hint types</a></li>
               <li class="RelTopic"><a href="../../progguide/functions_query_hints/overview.htm" class="manualLink">Query hints overview</a></li>
            </ul>
         </div>
         <p>&nbsp;</p>
         <table class="noborder" border="0" cellpadding="0" cellspacing="5">
            <tr>
               <td class="noborder"><img src="../../skin/mail.gif" alt="Send Us Your Feedback About this Help Page"></td>
               <td class="noborder"><a class="FeedbackLink" href="mailto:documentation@infor.com?Subject=Feedback on /progguide/functions_query_hints/logging, 10.4.2, en">Send Us Your Feedback About this Help Page</a></td>
            </tr>
         </table>
      </div>
   </body>
</html>